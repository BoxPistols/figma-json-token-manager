# トラブルシューティングガイド

このファイルは、Figma JSON Token Managerで発生する可能性のある一般的な問題と解決方法を提供します。

## よくある問題と解決方法

### 1. 役割・説明が正しく表示されない

**症状**: role と description フィールドが混合して表示される、または片方が undefined になる

**原因**:

- localStorageに古いデータが残っている
- トークンフォーマット判定の問題

**解決方法**:

1. 「再読み込み」ボタンをクリックして最新データを取得
2. それでも問題が続く場合は「リフレッシュ」ボタンでページリロード
3. ブラウザの開発者ツールでlocalStorageを手動クリア: `localStorage.removeItem('design-tokens-state')`

### 2. 表示モード切り替えが動作しない

**症状**: Standard/Compact/Table view の切り替えボタンが反応しない

**原因**:

- JavaScript エラーによる状態管理の問題
- React コンポーネントの再レンダリング問題

**解決方法**:

1. ブラウザコンソールでエラーを確認
2. ページをリフレッシュして状態をリセット
3. 異なるブラウザで試してみる

### 3. 検索が動作しない

**症状**: 検索クエリを入力してもトークンがフィルタリングされない

**原因**:

- 大文字小文字の不一致
- 特殊文字の処理問題

**解決方法**:

1. 検索クエリをクリア（Xボタン）してやり直し
2. 大文字小文字を変更して試す
3. 部分一致で検索を試す

### 4. ダブルクリック編集が反応しない

**症状**: フィールドをダブルクリックしても編集モードにならない

**原因**:

- イベントハンドラーの競合
- CSS による要素の重なり

**解決方法**:

1. 編集アイコン（鉛筆マーク）をクリックして編集開始
2. 要素の中央部分をダブルクリック
3. ブラウザのズームレベルを100%に設定

### 5. データが保存されない

**症状**: 編集内容がページリロード後に失われる

**原因**:

- localStorageへの書き込みエラー
- ブラウザのストレージ制限

**解決方法**:

1. ブラウザのlocalStorageが有効か確認
2. プライベートモード/シークレットモードでは保存されない場合がある
3. ブラウザのストレージ容量を確認

## デバッグのヒント

### ブラウザ開発者ツールの活用

1. **コンソールログ**: F12 → Console タブでエラーメッセージを確認
2. **Application タブ**: LocalStorage の内容を直接確認・編集
3. **Network タブ**: APIリクエストやファイル読み込みの問題を確認

### 有用なコンソールコマンド

```javascript
// 現在のトークンデータを確認
console.log(JSON.parse(localStorage.getItem('design-tokens-state')));

// localStorageをクリア
localStorage.removeItem('design-tokens-state');

// ダークモード設定を確認
console.log(localStorage.getItem('darkMode'));
```

### よくあるエラーメッセージ

- `Cannot read property 'role' of undefined`: トークンオブジェクトが正しく初期化されていない
- `localStorage.setItem failed`: ストレージ容量不足またはプライベートモード
- `flattenTokens is not a function`: モジュールインポートエラー

## パフォーマンス最適化

### 大量のトークンを扱う場合

1. **Compact Mode使用**: メモリ使用量とレンダリング時間を削減
2. **検索でフィルタリング**: 表示するトークン数を制限
3. **Table View活用**: 仮想スクロールによる効率的な表示

### レスポンシブ性能

- モバイルデバイスでは Compact Mode を推奨
- タブレットでは Standard Mode が最適
- デスクトップでは Table Mode が最も効率的

## サポート・報告

問題が解決しない場合は、以下の情報と合わせて報告してください：

- ブラウザとバージョン
- OS情報
- 再現手順
- エラーメッセージ（コンソールログ）
- 使用していたトークンデータのサンプル

GitHubリポジトリのIssuesセクションで報告をお待ちしています。
